<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telugu Bible</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Dark mode styles */
    .dark-mode {
      background-color: #333;
      color: #fff;
    }
    .dark-mode header {
      background-color: #444 !important;
    }
    .dark-mode footer {
      background-color: #444 !important;
    }
    .dark-mode .list-group-item {
      background-color: #555;
      color: #fff;
      border-color: #666;
    }
    .dark-mode .dropdown-menu {
      background-color: #444;
      color: #fff;
    }
    .dark-mode .dropdown-item {
      color: #fff;
    }
    .dark-mode .dropdown-item:hover {
      background-color: #666;
    }

    /* Layout styles */
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      display: flex;
      flex-direction: column;
    }
    main {
      flex: 1;
      overflow-y: auto;
      padding-bottom: 60px; /* Space for the footer */
    }
    footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      background-color: #f8f9fa;
      padding: 10px 0;
      text-align: center;
    }

    /* Hide scrollbar but keep scrolling */
    main::-webkit-scrollbar {
      width: 0; /* Hide scrollbar for WebKit browsers */
    }
    main {
      scrollbar-width: none; /* Hide scrollbar for Firefox */
      -ms-overflow-style: none; /* Hide scrollbar for IE/Edge */
    }

    /* Full-width content on large screens */
    @media (min-width: 992px) {
      .container-fluid {
        padding-left: 0;
        padding-right: 0;
      }
      main .container-fluid {
        padding-left: 15px;
        padding-right: 15px;
      }
    }

    /* Custom dropdown width */
    .dropdown-menu-wide {
      width: 300px; /* Adjust the width as needed */
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="bg-light p-3">
    <div class="container-fluid">
      <div class="d-flex flex-wrap justify-content-between align-items-center">
        <div class="title d-flex flex-nowrap gap-2">
          <h3>Telugu Bible</h3>
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="newDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                English Version
              </button>
              <ul class="dropdown-menu dropdown-menu-lg-end" aria-labelledby="newDropdown" id="newDropdownMenu">
                <!-- Items will be populated dynamically -->
              </ul>
          </div>
        </div>
        <div class="description text-center my-2 my-md-0  d-flex flex-nowrap gap-2">
          <h2 id="chapter" class="mb-0"> Loading ...</h2>
        </div>
        <div class="dropdowns d-flex flex-wrap gap-2 justify-content-center justify-content-md-end">
          <!-- New Dropdown (First Line) -->

          <!-- Other Dropdowns (Second Line) -->
          <div class="d-flex flex-wrap gap-2">
            <!-- Dropdown 1 -->
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdown1" data-bs-toggle="dropdown" aria-expanded="false">
                Old Testment
              </button>
              <ul class="dropdown-menu dropdown-menu-lg-end dropdown-menu-wide" aria-labelledby="dropdown1" id="dropdown1Menu">
                <div class="row">
                  <!-- Items will be populated dynamically in two columns -->
                </div>
              </ul>
            </div>
            <!-- Dropdown 2 -->
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdown2" data-bs-toggle="dropdown" aria-expanded="false">
                New Testment
              </button>
              <ul class="dropdown-menu dropdown-menu-lg-end dropdown-menu-wide" aria-labelledby="dropdown2" id="dropdown2Menu">
                <div class="row">
                  <!-- Items will be populated dynamically in two columns -->
                </div>
              </ul>
            </div>
            <!-- Dropdown 3 -->
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdown3" data-bs-toggle="dropdown" aria-expanded="false">
                Chapters
              </button>
              <ul class="dropdown-menu dropdown-menu-lg-end" aria-labelledby="dropdown3">
                <div class="row">
                  <% for (let i = 1; i <= 100; i++) { %>
                    <div class="col-2">
                      <li><a class="dropdown-item" href="#"><%= i %></a></li>
                    </div>
                  <% } %>
                </div>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

<input type="hidden" id="engVersion" name="engVersion">
<input type="hidden" id="selBook" name="selBook">
<input type="hidden" id="selChapter" name="selChapter">
<input type="hidden" id="selChapterCount" name="selChapterCount">

  <!-- Body -->
  <main class="container-fluid my-4">
    <!-- <h4>Bible Verses</h4> -->
    <ul id="verse-list" class="list-group">
      <!-- Bible verses will be dynamically inserted here -->
    </ul>
  </main>

  <!-- Footer -->
  <footer class="bg-light">
    <div class="container-fluid">
      <div class="d-flex justify-content-between align-items-center">
        <div class="copyright">
          <p class="mb-0">&copy; 2023 Bible Verses</p>
        </div>
        <div class="d-flex gap-2">
          <!-- Up Button -->
          <button id="up-button" class="btn btn-secondary">Up</button>
          <!-- Down Button -->
          <button id="down-button" class="btn btn-secondary">Down</button>
          <!-- Toggle Dark Mode Button -->
          <button id="dark-mode-toggle" class="btn btn-secondary">Toggle Dark Mode</button>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Hardcoded arrays for dropdown items
    const englishVersions = ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5", "Item 6", "Item 7", "Item 8", "Item 9", "Item 10"];
    const oldTestmentBooks = ['Genesis', 'Exodus', 'Leviticus', 'Numbers', 'Deuteronomy', 'Joshua', 'Judges', 'Ruth', '1 Samuel', '2 Samuel', '1 Kings', '2 Kings', '1 Chronicles', '2 Chronicles', 'Ezra', 'Nehemiah', 'Esther', 'Job', 'Psalms', 'Proverbs', 'Ecclesiastes', 'Song of Solomon', 'Isaiah', 'Jeremiah', 'Lamentations', 'Ezekiel', 'Daniel', 'Hosea', 'Joel', 'Amos', 'Obadiah', 'Jonah', 'Micah', 'Nahum', 'Habakkuk', 'Zephaniah', 'Haggai', 'Zechariah', 'Malachi'];
    const newTestmentBooks = ['Matthew', 'Mark', 'Luke', 'John', 'Acts', 'Romans', '1 Corinthians', '2 Corinthians', 'Galatians', 'Ephesians', 'Philippians', 'Colossians', '1 Thessalonians', '2 Thessalonians', '1 Timothy', '2 Timothy', 'Titus', 'Philemon', 'Hebrews', 'James', '1 Peter', '2 Peter', '1 John', '2 John', '3 John', 'Jude', 'Revelation'];
    const chapterCounts = [50, 40, 27, 36, 34, 24, 21, 4, 31, 24, 22, 25, 29, 36, 10, 13, 10, 42, 150, 31, 12, 8, 66, 52, 5, 48, 12, 14, 3, 9, 1, 4, 7, 3, 3, 3, 2, 14, 4, 28, 16, 24, 21, 28, 16, 16, 13, 6, 6, 4, 4, 5, 3, 6, 4, 3, 1, 13, 5, 5, 3, 5, 1, 1, 1, 22];

    let bible = {};

    const engVersion = document.getElementById('engVersion');
    const selBook= document.getElementById('selBook');
    const selChapter= document.getElementById('selChapter');
    const selChapterCount= document.getElementById('selChapterCount');
    const description = document.getElementById('chapter');

    // Function to populate verses into the list
    function populateVerses(verses) {
      const verseList = document.getElementById('verse-list');
      verseList.innerHTML = ''; // Clear existing content
      verses.forEach(verse => {
        const li = document.createElement('li');
        li.className = 'list-group-item';
        li.textContent = verse; // Assuming the JSON has a "text" field
        verseList.appendChild(li);
      });

      // Enable verse-by-verse scrolling
    //   enableVerseScrolling();
    }

    function selectChapter(book, chapter) {
        populateVerses(bible[book][chapter]);
        description.innerText = `${book} - Chapter ${chapter}`;
    }

    function selectBook(book, chapterCount) {
        selBook.value = book;
        selChapterCount.value = chapterCount;
        selectChapter(book, 1);
        document.getElementById('dropdown3').innerText = `Chapters (1 - ${chapterCount})`;
    }

    // Function to load verses from a JSON URL
    async function loadVerses() {
      const url = 'https://stltcb.github.io/bibles/Telugu_Bible-BSI.json'; // Replace with your JSON URL
      try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error('Failed to load verses');
        }
        bible = await response.json();
        selectBook('Genesis',chapterCounts[0])
      } catch (error) {
        console.error('Error loading verses:', error);
      }
    }

    function getMenuItem(text, chapterCount) {
        const col = document.createElement('div');
        col.className = 'col-6';
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.className = 'dropdown-item';
        a.href = '#';
        a.textContent = text;
        a.addEventListener('click',  () => { 
            selectBook(text, chapterCount);
        });
        li.appendChild(a);
        col.appendChild(li);
        return col;
    }

    // Function to populate dropdowns
    function populateDropdowns() {
      // Populate New Dropdown
      const newDropdownMenu = document.getElementById('newDropdownMenu');
      englishVersions.forEach(item => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.className = 'dropdown-item';
        a.href = '#';
        a.textContent = item;
        li.appendChild(a);
        newDropdownMenu.appendChild(li);
      });

      // Populate Dropdown 1 (two columns)
      const dropdown1Menu = document.querySelector('#dropdown1Menu .row');
      for (let index = 0; index < oldTestmentBooks.length/2; index++) {
        const menuItem = getMenuItem(oldTestmentBooks[index], chapterCounts[index]);
        dropdown1Menu.appendChild(menuItem);
        if (oldTestmentBooks.length <= index+20) break;
        const menuItem2 = getMenuItem(oldTestmentBooks[index+20], chapterCounts[index+20]);
        dropdown1Menu.appendChild(menuItem2);
      }

      // Populate Dropdown 2 (two columns)
      const dropdown2Menu = document.querySelector('#dropdown2Menu .row');
      for (let index = 0; index < newTestmentBooks.length/2; index++) {
        const menuItem = getMenuItem(newTestmentBooks[index], chapterCounts[index+39]);
        dropdown2Menu.appendChild(menuItem);
        if (newTestmentBooks.length <= index+14) break;
        const menuItem2 = getMenuItem(newTestmentBooks[index+14], chapterCounts[index+53]);
        dropdown2Menu.appendChild(menuItem2);
      }
    }

    // Function to enable verse-by-verse scrolling
    function enableVerseScrolling() {
      const verses = document.querySelectorAll('.list-group-item');

      // Scroll to a specific verse
      function scrollToVerse(index) {
        if (index >= 0 && index < verses.length) {
          window.scrollTo({
            top: verses[index].offsetTop,
            behavior: 'smooth'
          });
        }
      }

      // Handle Up button click
      document.getElementById('up-button').addEventListener('click', () => {
        const currentScroll = window.scrollY;
        let targetIndex = -1;

        // Find the previous verse
        for (let i = verses.length - 1; i >= 0; i--) {
          if (verses[i].offsetTop < currentScroll) {
            targetIndex = i;
            break;
          }
        }

        if (targetIndex !== -1) {
          scrollToVerse(targetIndex);
        }
      });

      // Handle Down button click
      document.getElementById('down-button').addEventListener('click', () => {
        const currentScroll = window.scrollY;
        let targetIndex = -1;

        // Find the next verse
        for (let i = 0; i < verses.length; i++) {
          if (verses[i].offsetTop > currentScroll) {
            targetIndex = i;
            break;
          }
        }

        if (targetIndex !== -1) {
          scrollToVerse(targetIndex);
        }
      });
    }

    // Dark mode toggle
    const darkModeToggle = document.getElementById('dark-mode-toggle');
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      document.querySelector('header').classList.toggle('dark-mode');
      document.querySelector('footer').classList.toggle('dark-mode');
      document.querySelectorAll('.list-group-item').forEach(item => {
        item.classList.toggle('dark-mode');
      });
    });

    // Populate dropdowns when the page loads
    populateDropdowns();

    // Load verses when the page loads
    loadVerses();
  </script>
</body>
</html>
